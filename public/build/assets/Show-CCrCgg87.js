import{x as N,y as _,k as S,f as $,c as r,b as e,d as c,w as x,e as p,u as n,l as f,t as i,F as y,p as b,n as w,g as P,j as h,i as F,m as R,s as V,o,q as D}from"./app-C1P8zghW.js";import{_ as E}from"./PublicLayout-Et60nxxn.js";import{P as O}from"./PrimaryButton-BjUHDuCZ.js";import{_ as C,a as B}from"./InputLabel-5DHHnYk1.js";import"./ApplicationLogo-B18VuzIY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dWEnZay8.js";const T={class:"py-12"},q={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},U={class:"p-6"},G={class:"flex mb-6","aria-label":"Breadcrumb"},I={class:"inline-flex items-center space-x-1 md:space-x-3"},J={class:"inline-flex items-center"},K={class:"flex items-center"},Q={"aria-current":"page"},W={class:"flex items-center"},X={class:"text-gray-500"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Z={class:"text-center"},ee=["src","alt"],te={key:1,class:"w-full max-w-md mx-auto h-96 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center shadow-lg"},se={class:"text-3xl font-bold text-gray-900 mb-2"},oe={key:0,class:"text-purple-600 font-medium mb-4"},re={key:1,class:"text-purple-600 font-medium mb-4"},le={class:"flex items-center mb-4"},ae={class:"flex items-center mr-4"},ne={key:0,class:"w-5 h-5 fill-current",viewBox:"0 0 20 20"},ie={key:1,class:"w-5 h-5 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},de={class:"ml-2 text-gray-600"},ce={class:"text-gray-700 mb-6"},ue={class:"mb-6"},me={class:"text-3xl font-bold text-purple-800 mb-2"},pe={class:"text-sm text-gray-600"},ge={class:"flex space-x-4"},xe={class:"mt-8 pt-8 border-t border-gray-200"},he={class:"flex items-center justify-between mb-6"},ve={class:"text-2xl font-bold text-gray-900"},fe={key:0,class:"bg-gray-50 p-6 rounded-lg mb-6 border border-gray-200"},ye={class:"text-lg font-semibold text-gray-900 mb-4"},be={class:"flex space-x-2 mt-2"},we=["onClick"],ke={class:"flex space-x-3"},_e={key:1,class:"space-y-4"},Ce={class:"flex items-start justify-between"},Be={class:"flex-1"},je={class:"flex items-center space-x-3 mb-2"},Me={class:"font-semibold text-gray-900"},ze={class:"flex items-center"},Ae={key:0,class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},Le={key:1,class:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},Ne={class:"text-sm text-gray-500"},Se={key:0,class:"text-gray-700 mt-2"},$e={key:0,class:"flex space-x-2 ml-4"},Pe=["onClick"],Fe=["onClick"],Re={key:2,class:"text-center py-8 text-gray-500"},Ve={key:0,class:"mt-2 text-sm"},Ge=Object.assign({layout:E},{__name:"Show",props:{product:Object,reviews:Array},setup(s){const k=s,g=N(),u=_(!1),m=_(null),j=S(()=>g.props.auth?.user?k.reviews.find(d=>d.user_id===g.props.auth.user.id):null),a=$({rating:5,comment:""}),M=d=>{m.value=d.id,a.rating=d.rating,a.comment=d.comment||"",u.value=!0},z=()=>{m.value=null,a.reset(),a.rating=5,u.value=!1},A=()=>{m.value?a.patch(route("reviews.update",m.value),{onSuccess:()=>{a.reset(),a.rating=5,u.value=!1,m.value=null}}):a.post(route("reviews.store",k.product.id),{onSuccess:()=>{a.reset(),a.rating=5,u.value=!1}})},L=d=>{confirm("ÃŠtes-vous sÃ»r de vouloir supprimer votre avis ?")&&D.delete(route("reviews.destroy",d))};return(d,t)=>(o(),r("div",T,[e("div",q,[e("div",H,[e("div",U,[e("nav",G,[e("ol",I,[e("li",J,[c(n(f),{href:d.route("products.index"),class:"text-gray-700 hover:text-purple-600"},{default:x(()=>[...t[2]||(t[2]=[p("Accueil",-1)])]),_:1},8,["href"])]),e("li",null,[e("div",K,[t[4]||(t[4]=e("svg",{class:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1)),c(n(f),{href:d.route("products.index"),class:"text-gray-700 hover:text-purple-600"},{default:x(()=>[...t[3]||(t[3]=[p("Parfums",-1)])]),_:1},8,["href"])])]),e("li",Q,[e("div",W,[t[5]||(t[5]=e("svg",{class:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1)),e("span",X,i(s.product.name),1)])])])]),e("div",Y,[e("div",Z,[s.product.image?(o(),r("img",{key:0,src:s.product.image,alt:s.product.name,class:"w-full max-w-md mx-auto rounded-lg shadow-lg"},null,8,ee)):(o(),r("div",te,[...t[6]||(t[6]=[e("span",{class:"text-8xl"},"ðŸ’",-1)])]))]),e("div",null,[e("h1",se,i(s.product.name),1),s.product.category?(o(),r("p",oe,i(s.product.category.name),1)):(o(),r("p",re,"Non catÃ©gorisÃ©")),e("div",le,[e("div",ae,[(o(),r(y,null,b(5,l=>e("div",{key:l,class:"text-yellow-400"},[l<=Math.round(Number(s.product.rating||0))?(o(),r("svg",ne,[...t[7]||(t[7]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])):(o(),r("svg",ie,[...t[8]||(t[8]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])]))])),64)),e("span",de,i(Number(s.product.rating||0).toFixed(1))+" ("+i(s.product.review_count||0)+" avis) ",1)])]),e("p",ce,i(s.product.description),1),e("div",ue,[e("p",me,i(s.product.price)+" DH",1),e("p",pe,[t[9]||(t[9]=p(" Stock disponible: ",-1)),e("span",{class:w(s.product.stock>0?"text-green-600":"text-red-600")},i(s.product.stock>0?s.product.stock+" unitÃ©s":"Ã‰puisÃ©"),3)])]),e("div",ge,[c(n(f),{href:d.route("cart.add",s.product.id),method:"post",as:"button",class:"flex-1 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-200 font-medium shadow-md text-center",disabled:s.product.stock===0},{default:x(()=>[p(i(s.product.stock>0?"Ajouter au Panier":"Ã‰puisÃ©"),1)]),_:1},8,["href","disabled"]),d.$page.props.auth.user?(o(),P(n(f),{key:0,href:d.route("wishlist.toggle",s.product.id),method:"post",as:"button",class:"bg-gray-100 text-gray-600 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors duration-200",title:"Ajouter Ã  la liste de souhaits"},{default:x(()=>[...t[10]||(t[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)])]),_:1},8,["href"])):h("",!0)])])]),e("div",xe,[e("div",he,[e("h2",ve," Avis clients ("+i(s.reviews?.length||0)+") ",1),n(g).props.auth?.user&&!j.value&&!u.value?(o(),r("button",{key:0,onClick:t[0]||(t[0]=l=>u.value=!0),class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors duration-200 font-medium"}," Ã‰crire un avis ")):h("",!0)]),u.value?(o(),r("div",fe,[e("h3",ye,i(m.value?"Modifier votre avis":"Votre avis"),1),e("form",{onSubmit:F(A,["prevent"]),class:"space-y-4"},[e("div",null,[c(C,{for:"rating",value:"Note"}),e("div",be,[(o(),r(y,null,b(5,l=>e("button",{key:l,type:"button",onClick:v=>n(a).rating=l,class:w(["text-3xl transition-transform duration-200 hover:scale-110",l<=n(a).rating?"text-yellow-400":"text-gray-300"])}," â˜… ",10,we)),64))]),c(B,{message:n(a).errors.rating,class:"mt-2"},null,8,["message"])]),e("div",null,[c(C,{for:"comment",value:"Commentaire (optionnel)"}),R(e("textarea",{id:"comment","onUpdate:modelValue":t[1]||(t[1]=l=>n(a).comment=l),rows:"4",class:"mt-1 block w-full border-gray-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm",placeholder:"Partagez votre expÃ©rience avec ce parfum..."},null,512),[[V,n(a).comment]]),c(B,{message:n(a).errors.comment,class:"mt-2"},null,8,["message"])]),e("div",ke,[c(O,{class:w({"opacity-25":n(a).processing}),disabled:n(a).processing},{default:x(()=>[p(i(m.value?"Mettre Ã  jour":"Publier l'avis"),1)]),_:1},8,["class","disabled"]),e("button",{type:"button",onClick:z,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])):h("",!0),s.reviews&&s.reviews.length>0?(o(),r("div",_e,[(o(!0),r(y,null,b(s.reviews,l=>(o(),r("div",{key:l.id,class:"bg-white border border-gray-200 rounded-lg p-6"},[e("div",Ce,[e("div",Be,[e("div",je,[e("span",Me,i(l.user?.name||"Anonyme"),1),e("div",ze,[(o(),r(y,null,b(5,v=>e("span",{key:v,class:"text-yellow-400"},[v<=l.rating?(o(),r("svg",Ae,[...t[11]||(t[11]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])])):(o(),r("svg",Le,[...t[12]||(t[12]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)])]))])),64))]),e("span",Ne,i(new Date(l.created_at).toLocaleDateString("fr-FR")),1)]),l.comment?(o(),r("p",Se,i(l.comment),1)):h("",!0)]),n(g).props.auth?.user&&l.user_id===n(g).props.auth.user.id?(o(),r("div",$e,[e("button",{onClick:v=>M(l),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Modifier ",8,Pe),e("button",{onClick:v=>L(l.id),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Supprimer ",8,Fe)])):h("",!0)])]))),128))])):(o(),r("div",Re,[t[15]||(t[15]=e("p",null,"Aucun avis pour le moment.",-1)),n(g).props.auth?.user?h("",!0):(o(),r("p",Ve,[c(n(f),{href:d.route("login"),class:"text-purple-600 hover:underline"},{default:x(()=>[...t[13]||(t[13]=[p("Connectez-vous",-1)])]),_:1},8,["href"]),t[14]||(t[14]=p(" pour Ãªtre le premier Ã  donner votre avis ! ",-1))]))]))])])])])]))}});export{Ge as default};
