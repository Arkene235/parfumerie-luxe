import{g as x,w as E,b as s,t as f,i as _,u as v,q as y,o as j}from"./app-C1P8zghW.js";import{_ as L}from"./AuthenticatedLayout-D1cAP7TZ.js";import"./ApplicationLogo-B18VuzIY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-dWEnZay8.js";var S="clover",P=function(e){return e===3?"v3":e},b="https://js.stripe.com",T="".concat(b,"/").concat(S,"/stripe.js"),R=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var I=function(e){return R.test(e)||C.test(e)},k=function(){for(var e=document.querySelectorAll('script[src^="'.concat(b,'"]')),r=0;r<e.length;r++){var t=e[r];if(I(t.src))return t}return null},h=function(e){var r="",t=document.createElement("script");t.src="".concat(T).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},U=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.6.1",startTime:r})},c=null,u=null,m=null,V=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},B=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},A=function(e){return c!==null?c:(c=new Promise(function(r,t){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var n=k();if(!(n&&e)){if(!n)n=h(e);else if(n&&m!==null&&u!==null){var a;n.removeEventListener("load",m),n.removeEventListener("error",u),(a=n.parentNode)===null||a===void 0||a.removeChild(n),n=h(e)}}m=B(r,t),u=V(t),n.addEventListener("load",m),n.addEventListener("error",u)}catch(o){t(o);return}}),c.catch(function(r){return c=null,Promise.reject(r)}))},G=function(e,r,t){if(e===null)return null;var n=r[0],a=n.match(/^pk_test/),o=P(e.version),l=S;a&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.6.1"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var p=e.apply(void 0,r);return U(p,t),p},d,w=!1,g=function(){return d||(d=A(null).catch(function(e){return d=null,Promise.reject(e)}),d)};Promise.resolve().then(function(){return g()}).catch(function(i){w||console.warn(i)});var q=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];w=!0;var n=Date.now();return g().then(function(a){return G(a,r,n)})};const J={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},N={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 bg-white border-b border-gray-200"},D={class:"text-xl mb-4"},X=["disabled"],H={__name:"Index",props:{total:Number},setup(i){let e=null,r=null,t=!1;onMounted(async()=>{e=await q("pk_test_..."),r=e.elements().create("card"),r.mount("#card-element"),r.on("change",o=>{const l=document.getElementById("card-errors");o.error?l.textContent=o.error.message:l.textContent=""})});const n=async()=>{t=!0;const{token:a,error:o}=await e.createToken(r);o?(document.getElementById("card-errors").textContent=o.message,t=!1):y.post("/checkout",{stripeToken:a.id})};return(a,o)=>(j(),x(L,{title:"Checkout"},{default:E(()=>[s("div",J,[s("div",M,[s("div",N,[s("div",W,[o[1]||(o[1]=s("h1",{class:"text-2xl font-bold mb-4"},"Paiement",-1)),s("p",D,"Total: $"+f(i.total),1),s("form",{onSubmit:_(n,["prevent"]),class:"space-y-4"},[o[0]||(o[0]=s("div",null,[s("label",{for:"card-element",class:"block text-sm font-medium text-gray-700"},"Carte de Crédit ou Débit"),s("div",{id:"card-element",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),s("div",{id:"card-errors",class:"text-red-500 text-sm mt-1",role:"alert"})],-1)),s("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",disabled:v(t)},f(v(t)?"Traitement...":"Payer Maintenant"),9,X)],32)])])])])]),_:1}))}};export{H as default};
